<!DOCTYPE html>
<html>
	<head th:replace="~{fragmentos :: head(Novo)}">
		
	</head>
	<body>
		<header th:replace="~{fragmentos :: header}"></header>
		<div class="container mt-3">
			<form th:object="${requisicaoCliente}" action="/clientes" method="POST">
				<div class="mb-3">
	  				<label  for="nome" class="form-label">Nome</label>
	  				<input th:errorclass="is-invalid" th:field="*{nome}" type="text" class="form-control" id="nome" placeholder="Informe o nome do cliente" name="nome">
	  				<div class="invalid-feedback" th:errors="*{nome}"></div>
				</div>
				<div class="mb-3">
	  				<label  for="cpf" class="form-label">CPF</label>
	  				<input th:errorclass="is-invalid" th:field="*{cpf}" type="text" class="form-control" id="cpf" placeholder="Informe o CPF do cliente" name="cpf">
	  				<div class="invalid-feedback" th:errors="*{cpf}"></div>
				</div>
				
				<div class="mb-3">
	  				<label  for="cep" class="form-label">CEP</label>
	  				<input th:errorclass="is-invalid" th:field="*{cep}" type="text" class="form-control" id="cep" placeholder="Informe o CEP do cliente" name="cep">
	  				<div class="invalid-feedback" th:errors="*{cep}"></div>
				</div>
				
 				<div class="mb-3"> 
 	  				<label  for="logradouro" class="form-label">Logradouro</label> 
 	  				<input th:errorclass="is-invalid" th:field="*{logradouro}" type="text" class="form-control" id="logradouro" placeholder="Informe o logradouro do cliente" name="logradouro"> 
 	  				<div class="invalid-feedback" th:errors="*{logradouro}"></div> 
 				</div>
 				
 				<div class="mb-3"> 
 	  				<label  for="complemento" class="form-label">Complemento</label> 
 	  				<input th:errorclass="is-invalid" th:field="*{complemento}" type="text" class="form-control" id="complemento" placeholder="Informe o complemento do cliente" name="logradouro"> 
 	  				<div class="invalid-feedback" th:errors="*{complemento}"></div> 
 				</div>
 				
 				<div class="mb-3"> 
 	  				<label  for="bairro" class="form-label">Bairro</label> 
 	  				<input th:errorclass="is-invalid" th:field="*{bairro}" type="text" class="form-control" id="bairro" placeholder="Informe o bairro do cliente" name="logradouro"> 
 	  				<div class="invalid-feedback" th:errors="*{bairro}"></div> 
 				</div>
 				
 				
 				
 				<div class="mb-3"> 
 	  				<label  for="localidade" class="form-label">Localidade</label> 
 	  				<input th:errorclass="is-invalid" th:field="*{localidade}" type="text" class="form-control" id="localidade" placeholder="Informe a localidade do cliente" name="logradouro"> 
 	  				<div class="invalid-feedback" th:errors="*{localidade}"></div> 
 				</div>
 				
 				<div class="mb-3"> 
 	  				<label  for="uf" class="form-label">UF</label> 
 	  				<input th:errorclass="is-invalid" th:field="*{uf}" type="text" class="form-control" id="uf" placeholder="Informe a UF do cliente" name="logradouro"> 
 	  				<div class="invalid-feedback" th:errors="*{uf}"></div> 
 				</div>
				
				<div class="mb-3">
	  				<label for="telefone" class="form-label">Telefone</label>
	  				<input th:errorclass="is-invalid" th:field="*{telefone}" type="text" class="form-control" id="telefone" placeholder="Informe o telefone do cliente" name="telefone">
	  				<div class="invalid-feedback" th:errors="*{telefone}"></div>
				</div>
				<div class="mb-3">
	  				<label  for="email" class="form-label">Email</label>
	  				<input th:errorclass="is-invalid" th:field="*{email}" type="text" class="form-control" id="email" placeholder="Informe o email do cliente" name="email">
	  				<div class="invalid-feedback" th:errors="*{email}"></div>
				</div>
				<button type="submit" class="btn btn-primary">Cadastrar</button>
							
			</form>
		</div>
		
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
		<script>
			console.log("dedeu");
			
			$("#cep").focusout(function(){
				console.log($("#cep").val());
				$.ajax({
					url: 'https://viacep.com.br/ws/'+$(this).val()+'/json/',
					
					dataType: 'json',
					
					success : function(resposta)
					{
						console.log(resposta)
						console.log(resposta.bairro)
						$("#logradouro").val(resposta.logradouro);
						$("#complemento").val(resposta.complemento);
						$("#bairro").val(resposta.bairro);
						$("#localidade").val(resposta.localidade);
						$("#uf").val(resposta.uf);
						$("#complemento").focus();
						
					}
				})
			})
			
			
		</script>
	</body>